<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Iceberg vs ShARC | RSE at Sheffield</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="http://rse.shef.ac.uk/blog/iceberg-vs-sharc/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Mike Croucher">
<link rel="prev" href="../sheffieldR-hacktoberfest/" title="Sheffield R Users group celebrates Hacktoberfest" type="text/html">
<link rel="next" href="../a-successful-2nd-rse-conference/" title="A successful 2nd RSE conference" type="text/html">
<meta property="og:site_name" content="RSE at Sheffield">
<meta property="og:title" content="Iceberg vs ShARC">
<meta property="og:url" content="http://rse.shef.ac.uk/blog/iceberg-vs-sharc/">
<meta property="og:description" content="TL;DR Around 100 of Iceberg's nodes are ancient and weaker than a decent laptop. You may get better performance by switching to ShARC.  You'll get even better performance by investing in the RSE proje">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-11-23T13:04:27Z">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="http://rse.shef.ac.uk/">

            <span id="blog-title">RSE at Sheffield</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="../../blog" class="nav-link">Blog</a>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">RSE Service</a>
            <div class="dropdown-menu">
                    <a href="../../service" class="dropdown-item">RSE Service Overview</a>
                    <a href="../../service/provision" class="dropdown-item">Service Model Provision</a>
                    <a href="../../service/activities" class="dropdown-item">What we do</a>
                    <a href="../../service/testimonials" class="dropdown-item">Testimonials</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Support</a>
            <div class="dropdown-menu">
                    <a href="../../support/code-clinic" class="dropdown-item">Code Clinic</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Training</a>
            <div class="dropdown-menu">
                    <a href="../../training" class="dropdown-item">Overview</a>
                    <a href="../../training/events" class="dropdown-item">Training Events</a>
                    <a href="../../training/carpentry" class="dropdown-item">Software and Data Carpentry</a>
                    <a href="../../training/deeplearning" class="dropdown-item">Deep Learning</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">RSE Community</a>
            <div class="dropdown-menu">
                    <a href="../../community" class="dropdown-item">Overview</a>
                    <a href="../../community/coffee-and-cake" class="dropdown-item">Coffee and Cake</a>
                    <a href="../../community/seminars" class="dropdown-item">Seminar Series</a>
                    <a href="../../community/resources-and-equipment" class="dropdown-item">Resources and Equipment</a>
                    <a href="../../community/job-descriptions" class="dropdown-item">RSE Job Descriptions</a>
            </div>
            </li>
<li class="nav-item dropdown">
<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Contact</a>
            <div class="dropdown-menu">
                    <a href="../../contact" class="dropdown-item">Contact Us</a>
                    <a href="../../contact/team" class="dropdown-item">RSE Team</a>
                    <a href="../../contact/alumni" class="dropdown-item">Alumni</a>
            </div>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Iceberg vs ShARC</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    <a href="../../authors/mike-croucher/">Mike Croucher</a>
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2017-11-23T13:04:27Z" itemprop="datePublished" title="2017-11-23 13:04">2017-11-23 13:04</time></a>
            </p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p><br></p>
<p><strong>TL;DR Around 100 of Iceberg's nodes are ancient and weaker than a decent laptop. You may get better performance by switching to ShARC.  You'll get even better performance by investing in the <a href="https://rse.shef.ac.uk/community/resources-and-equipment/">RSE project on ShARC</a>.</strong></p>
<h3>Benchmarking different nodes on our HPC systems</h3>
<p>I have been benchmarking various nodes on Iceberg and ShARC using Matrix-Matrix multiplication.
This operation is highly parallel and optimised these days and is also a vital operation in many scientific workflows.</p>
<p>The benchmark units are GigaFlops (Billion operations per second) and <strong>higher is better</strong>
Here are the results for maximum matrix sizes of 10000 by 10000, sorted worst to best</p>
<ul>
<li>
<a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/Sheffield_iceberg_12cores.ipynb">119 GigaFlops</a> - Old Iceberg 'Westmere' Nodes (12 core X5650 CPUs )</li>
<li>
<a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/MacBookPro2014.ipynb">169 Gigaflops</a> - My 4 core Mid-2014 MacBook Pro</li>
<li>
<a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/Sheffield_iceberg_16cores.ipynb">333 Gigaflops</a> - New Iceberg 'Ivy Bridge' Nodes (16 core )</li>
<li>
<a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/Sheffield_sharc_16cores.ipynb">458 Gigaflops</a> - Standard ShARC node (16 cores)</li>
<li>
<a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/Sheffield_sharc_32cores.ipynb">802 Gigaflops</a> - 32 core ShARC node (only available to <a href="https://rse.shef.ac.uk/community/resources-and-equipment/">RSE queue contributors</a>)</li>
</ul>
<p>According to the <a href="http://docs.hpc.shef.ac.uk/en/latest/iceberg/cluster_specs.html">Iceberg cluster specs</a>, over half of Iceberg is made up of the old 'Westmere' nodes.  According to these benchmarks, these are almost <strong>4 times slower</strong> than a standard node on ShARC.</p>
<h3>The RSE project - the fastest nodes available</h3>
<p>We in the RSE group have co-invested with our collaborators in additional hardware on ShARC to form a 'Premium queue'.  This hardware includes large memory nodes (<strong>768 Gigabytes per node</strong> - 12 times the amount that's normally available), Advanced GPUs (<a href="https://www.nvidia.com/en-us/data-center/dgx-1/">A DGX-1 server</a>) and 'dense-core' nodes with 32 CPUs each.</p>
<p>These 32 core nodes are capable of <a href="https://github.com/mikecroucher/Jupyter-Matrix-Matrix/blob/master/results/Sheffield_sharc_32cores.ipynb">over 800 Gigaflops</a> and so are 6.7 times faster than the old Iceberg nodes.  Furthermore, since they are only available to contributors, the queues will be shorter too!</p>
<p>Details of how to participate in the RSE-queue experiment on ShARC can be <a href="https://rse.shef.ac.uk/community/resources-and-equipment/">found on our website</a></p>
<h3>What if ShARC is slower than Iceberg?</h3>
<p>These benchmarks give reproducible evidence that ShARC can be significantly faster than Iceberg when well-optimised code is used.  We have heard some unconfirmed reports that code run on ShARC can be slower than code run on Iceberg.  If this is the case for you, please <a href="https://rse.shef.ac.uk/contact/">get in touch with us</a> and give details.</p>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../sheffieldR-hacktoberfest/" rel="prev" title="Sheffield R Users group celebrates Hacktoberfest">Previous post</a>
            </li>
            <li class="next">
                <a href="../a-successful-2nd-rse-conference/" rel="next" title="A successful 2nd RSE conference">Next post</a>
            </li>
        </ul></nav></aside></article><!--End of body content--><footer id="footer">
            Contents © 2019         <a href="mailto:rse@sheffield.ac.uk">RSE Sheffield</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


        <script src="../../assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
